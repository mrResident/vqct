# VQCT (Visual quality control tool)

## Основные возможности:

С заданного носителя или по ссылке на удалённом ресурсе открыть в браузере файл формата SVG.
После того, как графический файл полностью прорисуется в окне браузера, необходимо сделать скриншот и сохранить результат в файл в формате png.
Сохраннённый png файл необходимо сравнить с оценочным png файлом. Если была обнаружена проблема с прорисовкой svg файла в браузере, необходимо выдать сообщение о том что проверяемый файл не совпадает с оценочным, при этом желательно визуально подсветить область(и), где произошли изменения по сравнению с оценочным файлом.
Детальное описание задачи

Программа выполнена в консольном варианте, при выполнении программы на вход подаётся следующее: 

Usage: [keys] <path_to_svg_file> <path_to_base_png_file>

        Overview:

        [keys]

        --setup - запускает мастер установки, где пользователю предлагается указать пути к браузерам (chrome, opera, firefox и ie). Может использоваться с другими ключами.

        --load-settings=<path_to_file_settings> - задать путь к файлу настроек программы <settings_file_name>.properties. Если по указанному пути файл не найден, то будет автоматически создан файл с настройками пол умолчанию. Если запустить программу с ключём --setup, то вызовиться мастер установки, данные которого будут сохранены в указанным ключем --load-settings файл.

        --browsers=<list_browsers> - список браузеров которые будут использованы во время работы программы. Данные перечисляются через запятую. Допустимые значения для данного ключа: chrome, opera, firefox и ie. Если не задать данный ключ при запуске, то по умолчанию будут задействованы все четыре браузера. Example: --browsers=opera,ie

        --out=<path_to_output_screenshot_dir> - полный путь к выходному каталогу для скриншотов. Если каталог не существует, автоматически создается каталог и подкаталоги. Если путь не указан, скриншоты будут храниться в {current_execute_dir} / {file_name_with_ext} _screenshots

        <path_to_svg_file> - путь к SVG файлу. Example: /home/user/pics/svg_file.svg.
        Если полные путь не указан, тогда будет использоваться следующее {current_execute_dir}/svg_file.svg.

        <path_to_base_png_file> - путь к базовому (контрольному) PNG файлу. Example: /home/user/pics/base_png_file.png.
        Если полные путь не указан, тогда будет использоваться следующее {current_execute_dir}/base_png_file.png.

Для корректной работы необходимо следующее:

1. Браузеры - Chrome/Chromium, Opera, Firefox и IE (если программа запускается в windows)
2. Вэб драйвера selenium для выше перечисленных браузеров.
3. ImageMagick v 6.x.x (для работы с ImageMagick используется java wrapper - im4java)

**Программа должна делать**:

1. В браузере(ах) выполнить рендер поданного на вход svg файла.
2. Выполнить скриншот результата прорисовки, с последующим сохранением в формате png в выбранный каталог.
3. Провести сравнительный анализ получившегося результата с оценочным png файлом, который был также подан на вход программе.
4. Сформировать результат сравнения.

## Рендер svg файла в браузере

Под рендером svg файла понимается прорисовка файла в окне браузера с последующем сохранением результата рендера в файл формата png. Предполагается использовать набор браузеров, таких как: Chrome/Chromium, Firefox, Opera и IE.
Для работы с браузерами был выбран Selenium HQ, который предоставляет собой удобный набор инструментов для работы с различными браузерами через единый API-интерфейс. 
	
Процесс работы с выбранным набором браузеров представляет собой следующее:

1. инициализация веб-драйвера посредствам перечисления параметров запуска выбранного браузера, одним из этих параметров должен быть параметр запуска браузера в режиме headless (если такой режим поддерживается браузером)
2. заданием размеров окна браузера - ширина и высота;
3. задание ссылки на ресурс, который необходимо открыть в веб-браузере;
4. непосредственно рендер открытого ресурса;
5. сохранение результата рендера в файл формата png по указанному, при запуске программы, пути.

## Сравнение png файлов
	
Данный этап представляет собой сравнительный анализ выходных данных, полученных при рендере исходного svg файла в выбранных браузерах, с оценочным png файлом. Программа должна сообщить, идентичны ли сравниваемые png файлы с оценочным или нет. Если есть отличия, то желательно указать ту область(и) в сравниваемом файле, которые отличаются с оценочным, путём подсветки этих областей в выходном png файле.
